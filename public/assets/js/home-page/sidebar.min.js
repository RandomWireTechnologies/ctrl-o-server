var PORISH = PORISH || {};
!function (window, document, $) {
    "use strict";

    PORISH.sidebarporish = {
        init: function () {
            "undefined" != typeof $.slidePanel && ($(document).on("click", '[data-toggle="site-sidebar"]', function () {
                var $this = $(this),
                        direction = "right";
                $("body").hasClass("site-menubar-flipped") && (direction = "left");
                var defaults = {
                    closeSelector: ".slidePanel-close",
                    mouseDragHandler: ".slidePanel-handler",
                    loading: {
                        template: function (options) {
                            return '<div class="' + options.classes.loading + '"><div class="loader loader-default"></div></div>'
                        }, showCallback: function (options) {
                            this.$el.addClass(options.classes.loading + "-show")
                        }, hideCallback: function (options) {
                            this.$el.removeClass(options.classes.loading + "-show")
                        }
                    }
                },
                options = $.extend({}, defaults, {
                    direction: direction,
                    skin: "site-sidebar",
                    dragTolerance: 80,
                    template: function (options) {
                        return '<div class="' + options.classes.base + " " + options.classes.base + "-" + options.direction + '"><div class="' + options.classes.content + ' site-sidebar-content"></div><div class="slidePanel-handler"></div></div>'
                    },
                    beforeShow: function () {
                        $this.hasClass("active") || $this.addClass("active")
                    },
                    afterHide: function () {
                        $this.hasClass("active") && $this.removeClass("active")
                    }
                });
                if ($this.hasClass("active"))
                    $.slidePanel.hide();
                else {
                    var url = $this.data("url");
                    url || (url = $this.attr("href"), url = url && url.replace(/.*(?=#[^\s]*$)/, "")), $.slidePanel.show({
                        url: url
                    }, options)
                }
            }), $(document).on("click", '[data-toggle="show-chat"]', function () {
                $("#conversation").addClass("active")
            }), $(document).on("click", '[data-toggle="close-chat"]', function () {
                $("#conversation").removeClass("active")
            }))
        }
    }

    $(document).ready(PORISH.sidebarporish.init);
}(window, document, jQuery);